# Qdrant Vector Database
# Network: Uses external network ai-network

# Shared configuration anchors
x-healthcheck-fast: &healthcheck-fast
  interval: 5s
  timeout: 5s
  retries: 3
  start_period: 10s

networks:
  default:
    external: true
    name: ai-network

volumes:
  qdrant_storage:

services:
  qdrant:
    image: qdrant/qdrant
    container_name: qdrant
    restart: unless-stopped
    expose:
      - 6333/tcp
      - 6334/tcp
    volumes:
      - qdrant_storage:/qdrant/storage
    networks:
      - default
    healthcheck:
      test: ["CMD-SHELL", "timeout 1 bash -c '</dev/tcp/localhost/6333' || exit 1"]
      <<: *healthcheck-fast
