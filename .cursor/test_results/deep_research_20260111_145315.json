{
  "timestamp": "2026-01-11T14:53:15.957314",
  "duration": 43.4,
  "exit_code": 1,
  "summary": {
    "total": 92,
    "passed": 54,
    "failed": 38,
    "skipped": 0,
    "errors": 0,
    "success_rate": 58.7
  },
  "coverage": {
    "enabled": false,
    "percent": 0.0,
    "data": {}
  },
  "failures": [
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_graph_enhanced.py::test_query_knowledge_graphiti_enabled",
      "call": "tests/test_deep_research/test_graph_enhanced.py:30: in test_query_knowledge_graphiti_enabled\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'",
      "duration": 0.0012682800006587058
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_graph_enhanced.py::test_query_knowledge_graph_only_mode",
      "call": "tests/test_deep_research/test_graph_enhanced.py:77: in test_query_knowledge_graph_only_mode\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'",
      "duration": 0.0008014430059120059
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_graph_enhanced.py::test_query_knowledge_graph_hybrid_merge",
      "call": "tests/test_deep_research/test_graph_enhanced.py:114: in test_query_knowledge_graph_hybrid_merge\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'",
      "duration": 0.0007212090131361037
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_graph_enhanced.py::test_query_knowledge_graph_deduplication",
      "call": "tests/test_deep_research/test_graph_enhanced.py:165: in test_query_knowledge_graph_deduplication\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'",
      "duration": 0.0010759049910120666
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_graph_enhanced.py::test_query_knowledge_graph_multi_hop",
      "call": "tests/test_deep_research/test_graph_enhanced.py:212: in test_query_knowledge_graph_multi_hop\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'",
      "duration": 0.0009802810091059655
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_graph_enhanced.py::test_graph_search_entity_relationships",
      "call": "tests/test_deep_research/test_graph_enhanced.py:265: in test_graph_search_entity_relationships\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'",
      "duration": 0.0010077589831780642
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_graph_enhanced.py::test_graph_search_connected_entities",
      "call": "tests/test_deep_research/test_graph_enhanced.py:297: in test_graph_search_connected_entities\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'",
      "duration": 0.0010267879988532513
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_graph_enhanced.py::test_graph_search_fallback",
      "call": "tests/test_deep_research/test_graph_enhanced.py:356: in test_graph_search_fallback\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'",
      "duration": 0.003734066995093599
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_linear_agent.py::test_run_linear_research_success",
      "call": "tests/test_deep_research/test_linear_agent.py:36: in test_run_linear_research_success\n    result = await run_linear_research(query)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/workflow.py:50: in run_linear_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable",
      "duration": 0.05036203801864758
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_linear_agent.py::test_run_linear_research_with_sources",
      "call": "tests/test_deep_research/test_linear_agent.py:76: in test_run_linear_research_with_sources\n    result = await run_linear_research(query)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/workflow.py:50: in run_linear_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable",
      "duration": 0.09221341399825178
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_linear_agent.py::test_run_linear_research_with_citations",
      "call": "tests/test_deep_research/test_linear_agent.py:106: in test_run_linear_research_with_citations\n    result = await run_linear_research(query)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/workflow.py:50: in run_linear_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable",
      "duration": 0.05216119100805372
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_linear_agent.py::test_run_linear_research_error_handling",
      "call": "tests/test_deep_research/test_linear_agent.py:125: in test_run_linear_research_error_handling\n    result = await run_linear_research(query)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/workflow.py:50: in run_linear_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable",
      "duration": 0.04666343599092215
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_linear_agent.py::test_run_linear_research_session_isolation",
      "call": "tests/test_deep_research/test_linear_agent.py:156: in test_run_linear_research_session_isolation\n    result = await run_linear_research(query, session_id=\"custom-session-456\")\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/workflow.py:50: in run_linear_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable",
      "duration": 0.08680180201190524
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_linear_agent.py::test_search_web_tool",
      "call": "tests/test_deep_research/test_linear_agent.py:176: in test_search_web_tool\n    ctx = RunContext(deps=mock_deep_research_deps, state={}, agent=None, run_id=\"test-run\")\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: RunContext.__init__() got an unexpected keyword argument 'state'",
      "duration": 0.0008557730179745704
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_linear_agent.py::test_fetch_page_tool",
      "call": "tests/test_deep_research/test_linear_agent.py:210: in test_fetch_page_tool\n    ctx = RunContext(deps=mock_deep_research_deps, state={}, agent=None, run_id=\"test-run\")\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: RunContext.__init__() got an unexpected keyword argument 'state'",
      "duration": 0.0012418529950082302
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_linear_agent.py::test_parse_document_tool",
      "call": "tests/test_deep_research/test_linear_agent.py:236: in test_parse_document_tool\n    ctx = RunContext(deps=mock_deep_research_deps, state={}, agent=None, run_id=\"test-run\")\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: RunContext.__init__() got an unexpected keyword argument 'state'",
      "duration": 0.0007196509977802634
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_linear_agent.py::test_ingest_knowledge_tool",
      "call": "tests/test_deep_research/test_linear_agent.py:270: in test_ingest_knowledge_tool\n    ctx = RunContext(deps=mock_deep_research_deps, state={}, agent=None, run_id=\"test-run\")\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: RunContext.__init__() got an unexpected keyword argument 'state'",
      "duration": 0.0004757439892273396
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_linear_agent.py::test_query_knowledge_tool",
      "call": "tests/test_deep_research/test_linear_agent.py:307: in test_query_knowledge_tool\n    ctx = RunContext(deps=mock_deep_research_deps, state={}, agent=None, run_id=\"test-run\")\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: RunContext.__init__() got an unexpected keyword argument 'state'",
      "duration": 0.000560109008802101
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_storm_workflow.py::test_run_storm_research_success",
      "call": "tests/test_deep_research/test_storm_workflow.py:121: in test_run_storm_research_success\n    result = await run_storm_research(query, session_id=\"test-session\")\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/storm_workflow.py:40: in run_storm_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable",
      "duration": 0.04779745000996627
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_storm_workflow.py::test_run_storm_research_with_session_id",
      "call": "tests/test_deep_research/test_storm_workflow.py:152: in test_run_storm_research_with_session_id\n    result = await run_storm_research(query, session_id=session_id)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/storm_workflow.py:40: in run_storm_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable",
      "duration": 0.04937917800270952
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_storm_workflow.py::test_run_storm_research_error_handling",
      "call": "tests/test_deep_research/test_storm_workflow.py:167: in test_run_storm_research_error_handling\n    result = await run_storm_research(query)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/storm_workflow.py:40: in run_storm_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable",
      "duration": 0.04150530300103128
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_storm_workflow.py::test_run_storm_research_state_persistence",
      "call": "tests/test_deep_research/test_storm_workflow.py:200: in test_run_storm_research_state_persistence\n    result = await run_storm_research(query)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/storm_workflow.py:40: in run_storm_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable",
      "duration": 0.043434835999505594
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_storm_workflow.py::test_run_storm_research_max_iterations",
      "call": "tests/test_deep_research/test_storm_workflow.py:231: in test_run_storm_research_max_iterations\n    result = await run_storm_research(query, max_iterations=10)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/storm_workflow.py:40: in run_storm_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable",
      "duration": 0.25923618700471707
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_tools.py::test_fetch_page_success",
      "call": "tests/test_deep_research/test_tools.py:191: in test_fetch_page_success\n    assert response.success is True\nE   assert False is True\nE    +  where False = FetchPageResponse(url='https://example.com/test-article', content='', metadata={'error': \"'url'\"}, success=False).success",
      "duration": 0.02689932001521811
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_tools.py::test_fetch_page_metadata_extraction",
      "call": "tests/test_deep_research/test_tools.py:252: in test_fetch_page_metadata_extraction\n    assert \"title\" in response.metadata\nE   assert 'title' in {'error': \"'url'\"}\nE    +  where {'error': \"'url'\"} = FetchPageResponse(url='https://example.com/test-article', content='', metadata={'error': \"'url'\"}, success=False).metadata",
      "duration": 0.005842849001055583
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_tools.py::test_parse_document_html",
      "call": "tests/test_deep_research/test_tools.py:282: in test_parse_document_html\n    with patch(\"server.projects.deep_research.tools.DocumentConverter\") as mock_converter:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'DocumentConverter'",
      "duration": 0.0043917760194744915
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_tools.py::test_parse_document_markdown",
      "call": "tests/test_deep_research/test_tools.py:323: in test_parse_document_markdown\n    with patch(\"server.projects.deep_research.tools.DocumentConverter\") as mock_converter:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'DocumentConverter'",
      "duration": 0.0016532269946765155
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_tools.py::test_parse_document_text",
      "call": "tests/test_deep_research/test_tools.py:356: in test_parse_document_text\n    with patch(\"server.projects.deep_research.tools.DocumentConverter\") as mock_converter:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'DocumentConverter'",
      "duration": 0.009441423986572772
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_tools.py::test_parse_document_chunking",
      "call": "tests/test_deep_research/test_tools.py:394: in test_parse_document_chunking\n    with patch(\"server.projects.deep_research.tools.DocumentConverter\") as mock_converter:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'DocumentConverter'",
      "duration": 0.002049606991931796
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_tools.py::test_ingest_knowledge_with_graphiti",
      "call": "tests/test_deep_research/test_tools.py:500: in test_ingest_knowledge_with_graphiti\n    assert response.facts_added > 0\nE   assert 0 > 0\nE    +  where 0 = IngestKnowledgeResponse(document_id='69641bbb8700757bbc807154', chunks_created=3, facts_added=0, success=True, errors=[\"Graphiti ingestion failed: 'int' object has no attribute 'get'\"]).facts_added",
      "duration": 0.012804052006686106
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_tools.py::test_ingest_knowledge_empty_chunks",
      "call": "tests/test_deep_research/test_tools.py:556: in test_ingest_knowledge_empty_chunks\n    assert response.success is True\nE   assert False is True\nE    +  where False = IngestKnowledgeResponse(document_id='', chunks_created=0, facts_added=0, success=False, errors=[\"object MagicMock can't be used in 'await' expression\"]).success",
      "duration": 0.0080711729824543
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_tools.py::test_query_knowledge_semantic",
      "call": "tests/test_deep_research/test_tools.py:640: in test_query_knowledge_semantic\n    assert response.success is True\nE   assert False is True\nE    +  where False = QueryKnowledgeResponse(results=[], count=0, success=False).success",
      "duration": 0.006054672005120665
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_tools.py::test_query_knowledge_text",
      "call": "tests/test_deep_research/test_tools.py:680: in test_query_knowledge_text\n    assert response.success is True\nE   assert False is True\nE    +  where False = QueryKnowledgeResponse(results=[], count=0, success=False).success",
      "duration": 0.0038482469972223043
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_tools.py::test_query_knowledge_hybrid",
      "call": "tests/test_deep_research/test_tools.py:719: in test_query_knowledge_hybrid\n    assert response.success is True\nE   assert False is True\nE    +  where False = QueryKnowledgeResponse(results=[], count=0, success=False).success",
      "duration": 0.0031422339961864054
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_tools.py::test_query_knowledge_with_graphiti",
      "call": "tests/test_deep_research/test_tools.py:737: in test_query_knowledge_with_graphiti\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'",
      "duration": 0.0015745930140838027
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_tools.py::test_query_knowledge_session_filtering",
      "call": "tests/test_deep_research/test_tools.py:805: in test_query_knowledge_session_filtering\n    assert response.success is True\nE   assert False is True\nE    +  where False = QueryKnowledgeResponse(results=[], count=0, success=False).success",
      "duration": 0.00497674397774972
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_tools.py::test_query_knowledge_empty_results",
      "call": "tests/test_deep_research/test_tools.py:829: in test_query_knowledge_empty_results\n    assert response.success is True\nE   assert False is True\nE    +  where False = QueryKnowledgeResponse(results=[], count=0, success=False).success",
      "duration": 0.005383570009144023
    },
    {
      "nodeid": "04-lambda/tests/test_deep_research/test_tools.py::test_query_knowledge_graph_only",
      "call": "tests/test_deep_research/test_tools.py:846: in test_query_knowledge_graph_only\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'",
      "duration": 0.0009142390044871718
    }
  ],
  "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.13.3, pytest-9.0.2, pluggy-1.6.0 -- /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/.venv/bin/python3\ncachedir: .pytest_cache\nmetadata: {'Python': '3.13.3', 'Platform': 'Linux-6.6.87.2-microsoft-standard-WSL2-x86_64-with-glibc2.39', 'Packages': {'pytest': '9.0.2', 'pluggy': '1.6.0'}, 'Plugins': {'mock': '3.15.1', 'cov': '7.0.0', 'logfire': '4.16.0', 'asyncio': '1.3.0', 'anyio': '4.12.0', 'metadata': '3.1.1', 'json-report': '1.5.0', 'langsmith': '0.6.2', 'Faker': '40.1.0'}}\nrootdir: /home/jaewilson07/GitHub/local-ai-packaged\nconfigfile: pyproject.toml\nplugins: mock-3.15.1, cov-7.0.0, logfire-4.16.0, asyncio-1.3.0, anyio-4.12.0, metadata-3.1.1, json-report-1.5.0, langsmith-0.6.2, Faker-40.1.0\nasyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollecting ... collected 92 items\n\ntests/test_deep_research/test_graph_enhanced.py::test_query_knowledge_graphiti_enabled FAILED [  1%]\ntests/test_deep_research/test_graph_enhanced.py::test_query_knowledge_graph_only_mode FAILED [  2%]\ntests/test_deep_research/test_graph_enhanced.py::test_query_knowledge_graph_hybrid_merge FAILED [  3%]\ntests/test_deep_research/test_graph_enhanced.py::test_query_knowledge_graph_deduplication FAILED [  4%]\ntests/test_deep_research/test_graph_enhanced.py::test_query_knowledge_graph_multi_hop FAILED [  5%]\ntests/test_deep_research/test_graph_enhanced.py::test_graph_search_entity_relationships FAILED [  6%]\ntests/test_deep_research/test_graph_enhanced.py::test_graph_search_connected_entities FAILED [  7%]\ntests/test_deep_research/test_graph_enhanced.py::test_graph_search_fallback FAILED [  8%]\ntests/test_deep_research/test_linear_agent.py::test_run_linear_research_success FAILED [  9%]\ntests/test_deep_research/test_linear_agent.py::test_run_linear_research_with_sources FAILED [ 10%]\ntests/test_deep_research/test_linear_agent.py::test_run_linear_research_with_citations FAILED [ 11%]\ntests/test_deep_research/test_linear_agent.py::test_run_linear_research_error_handling FAILED [ 13%]\ntests/test_deep_research/test_linear_agent.py::test_run_linear_research_session_isolation FAILED [ 14%]\ntests/test_deep_research/test_linear_agent.py::test_search_web_tool FAILED [ 15%]\ntests/test_deep_research/test_linear_agent.py::test_fetch_page_tool FAILED [ 16%]\ntests/test_deep_research/test_linear_agent.py::test_parse_document_tool FAILED [ 17%]\ntests/test_deep_research/test_linear_agent.py::test_ingest_knowledge_tool FAILED [ 18%]\ntests/test_deep_research/test_linear_agent.py::test_query_knowledge_tool FAILED [ 19%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_planner_node_generates_outline PASSED [ 20%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_planner_node_creates_vectors PASSED [ 21%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_planner_node_pre_search PASSED [ 22%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_planner_node_error_handling PASSED [ 23%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_executor_node_processes_vector PASSED [ 25%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_executor_node_full_pipeline PASSED [ 26%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_executor_node_vector_status_updates PASSED [ 27%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_executor_node_error_handling PASSED [ 28%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_executor_node_iterates_vectors PASSED [ 29%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_auditor_node_validates_high_confidence PASSED [ 30%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_auditor_node_validates_low_confidence PASSED [ 31%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_auditor_node_refinement_loop PASSED [ 32%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_auditor_node_missing_evidence PASSED [ 33%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_auditor_node_marks_verified PASSED [ 34%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_writer_node_generates_sections PASSED [ 35%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_writer_node_citations PASSED [ 36%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_writer_node_closed_book_mode PASSED [ 38%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_writer_node_combines_sections PASSED [ 39%]\ntests/test_deep_research/test_orchestrator_nodes.py::test_writer_node_sources_section PASSED [ 40%]\ntests/test_deep_research/test_state_models.py::test_research_state_creation PASSED [ 41%]\ntests/test_deep_research/test_state_models.py::test_research_state_typing PASSED [ 42%]\ntests/test_deep_research/test_state_models.py::test_research_state_defaults PASSED [ 43%]\ntests/test_deep_research/test_state_models.py::test_research_vector_creation PASSED [ 44%]\ntests/test_deep_research/test_state_models.py::test_research_vector_status_transitions PASSED [ 45%]\ntests/test_deep_research/test_state_models.py::test_research_vector_refinement PASSED [ 46%]\ntests/test_deep_research/test_state_models.py::test_research_vector_sources PASSED [ 47%]\ntests/test_deep_research/test_state_models.py::test_research_vector_chunks_retrieved PASSED [ 48%]\ntests/test_deep_research/test_state_models.py::test_citation_creation PASSED [ 50%]\ntests/test_deep_research/test_state_models.py::test_citation_metadata PASSED [ 51%]\ntests/test_deep_research/test_state_models.py::test_citation_default_ingested_at PASSED [ 52%]\ntests/test_deep_research/test_state_models.py::test_research_state_with_vectors PASSED [ 53%]\ntests/test_deep_research/test_state_models.py::test_research_state_completed_sections PASSED [ 54%]\ntests/test_deep_research/test_state_models.py::test_research_state_error_collection PASSED [ 55%]\ntests/test_deep_research/test_storm_workflow.py::test_create_research_graph PASSED [ 56%]\ntests/test_deep_research/test_storm_workflow.py::test_graph_node_connections PASSED [ 57%]\ntests/test_deep_research/test_storm_workflow.py::test_graph_conditional_edges PASSED [ 58%]\ntests/test_deep_research/test_storm_workflow.py::test_get_research_graph PASSED [ 59%]\ntests/test_deep_research/test_storm_workflow.py::test_run_storm_research_success FAILED [ 60%]\ntests/test_deep_research/test_storm_workflow.py::test_run_storm_research_with_session_id FAILED [ 61%]\ntests/test_deep_research/test_storm_workflow.py::test_run_storm_research_error_handling FAILED [ 63%]\ntests/test_deep_research/test_storm_workflow.py::test_run_storm_research_state_persistence FAILED [ 64%]\ntests/test_deep_research/test_storm_workflow.py::test_run_storm_research_max_iterations FAILED [ 65%]\ntests/test_deep_research/test_storm_workflow.py::test_research_state_initialization PASSED [ 66%]\ntests/test_deep_research/test_storm_workflow.py::test_research_state_updates PASSED [ 67%]\ntests/test_deep_research/test_storm_workflow.py::test_research_state_vector_tracking PASSED [ 68%]\ntests/test_deep_research/test_storm_workflow.py::test_research_state_error_collection PASSED [ 69%]\ntests/test_deep_research/test_tools.py::test_search_web_success PASSED   [ 70%]\ntests/test_deep_research/test_tools.py::test_search_web_empty_query PASSED [ 71%]\ntests/test_deep_research/test_tools.py::test_search_web_timeout PASSED   [ 72%]\ntests/test_deep_research/test_tools.py::test_search_web_connection_error PASSED [ 73%]\ntests/test_deep_research/test_tools.py::test_search_web_with_limit PASSED [ 75%]\ntests/test_deep_research/test_tools.py::test_search_web_with_engines PASSED [ 76%]\ntests/test_deep_research/test_tools.py::test_fetch_page_success FAILED   [ 77%]\ntests/test_deep_research/test_tools.py::test_fetch_page_invalid_url PASSED [ 78%]\ntests/test_deep_research/test_tools.py::test_fetch_page_timeout PASSED   [ 79%]\ntests/test_deep_research/test_tools.py::test_fetch_page_connection_error PASSED [ 80%]\ntests/test_deep_research/test_tools.py::test_fetch_page_metadata_extraction FAILED [ 81%]\ntests/test_deep_research/test_tools.py::test_parse_document_html FAILED  [ 82%]\ntests/test_deep_research/test_tools.py::test_parse_document_markdown FAILED [ 83%]\ntests/test_deep_research/test_tools.py::test_parse_document_text FAILED  [ 84%]\ntests/test_deep_research/test_tools.py::test_parse_document_chunking FAILED [ 85%]\ntests/test_deep_research/test_tools.py::test_parse_document_empty_content PASSED [ 86%]\ntests/test_deep_research/test_tools.py::test_ingest_knowledge_success PASSED [ 88%]\ntests/test_deep_research/test_tools.py::test_ingest_knowledge_with_graphiti FAILED [ 89%]\ntests/test_deep_research/test_tools.py::test_ingest_knowledge_session_isolation PASSED [ 90%]\ntests/test_deep_research/test_tools.py::test_ingest_knowledge_empty_chunks FAILED [ 91%]\ntests/test_deep_research/test_tools.py::test_ingest_knowledge_embedding_generation PASSED [ 92%]\ntests/test_deep_research/test_tools.py::test_query_knowledge_semantic FAILED [ 93%]\ntests/test_deep_research/test_tools.py::test_query_knowledge_text FAILED [ 94%]\ntests/test_deep_research/test_tools.py::test_query_knowledge_hybrid FAILED [ 95%]\ntests/test_deep_research/test_tools.py::test_query_knowledge_with_graphiti FAILED [ 96%]\ntests/test_deep_research/test_tools.py::test_query_knowledge_session_filtering FAILED [ 97%]\ntests/test_deep_research/test_tools.py::test_query_knowledge_empty_results FAILED [ 98%]\ntests/test_deep_research/test_tools.py::test_query_knowledge_graph_only FAILED [100%]\n\n=================================== FAILURES ===================================\n____________________ test_query_knowledge_graphiti_enabled _____________________\ntests/test_deep_research/test_graph_enhanced.py:30: in test_query_knowledge_graphiti_enabled\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'\n_____________________ test_query_knowledge_graph_only_mode _____________________\ntests/test_deep_research/test_graph_enhanced.py:77: in test_query_knowledge_graph_only_mode\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'\n___________________ test_query_knowledge_graph_hybrid_merge ____________________\ntests/test_deep_research/test_graph_enhanced.py:114: in test_query_knowledge_graph_hybrid_merge\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'\n___________________ test_query_knowledge_graph_deduplication ___________________\ntests/test_deep_research/test_graph_enhanced.py:165: in test_query_knowledge_graph_deduplication\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'\n_____________________ test_query_knowledge_graph_multi_hop _____________________\ntests/test_deep_research/test_graph_enhanced.py:212: in test_query_knowledge_graph_multi_hop\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'\n____________________ test_graph_search_entity_relationships ____________________\ntests/test_deep_research/test_graph_enhanced.py:265: in test_graph_search_entity_relationships\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'\n_____________________ test_graph_search_connected_entities _____________________\ntests/test_deep_research/test_graph_enhanced.py:297: in test_graph_search_connected_entities\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'\n__________________________ test_graph_search_fallback __________________________\ntests/test_deep_research/test_graph_enhanced.py:356: in test_graph_search_fallback\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'\n_______________________ test_run_linear_research_success _______________________\ntests/test_deep_research/test_linear_agent.py:36: in test_run_linear_research_success\n    result = await run_linear_research(query)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/workflow.py:50: in run_linear_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable\n------------------------------ Captured log call -------------------------------\nERROR    server.projects.deep_research.workflow:workflow.py:61 Error running linear research: 'Field' object is not iterable\nTraceback (most recent call last):\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/workflow.py\", line 50, in run_linear_research\n    await deps.initialize()\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/dependencies.py\", line 72, in initialize\n    await self.initialize_mongodb()\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/shared/dependencies.py\", line 101, in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n                        ~~~~~~~~~~~~~~~~^\n        uri, serverSelectionTimeoutMS=server_selection_timeout_ms\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py\", line 797, in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nTypeError: 'Field' object is not iterable\n____________________ test_run_linear_research_with_sources _____________________\ntests/test_deep_research/test_linear_agent.py:76: in test_run_linear_research_with_sources\n    result = await run_linear_research(query)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/workflow.py:50: in run_linear_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable\n------------------------------ Captured log call -------------------------------\nERROR    server.projects.deep_research.workflow:workflow.py:61 Error running linear research: 'Field' object is not iterable\nTraceback (most recent call last):\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/workflow.py\", line 50, in run_linear_research\n    await deps.initialize()\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/dependencies.py\", line 72, in initialize\n    await self.initialize_mongodb()\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/shared/dependencies.py\", line 101, in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n                        ~~~~~~~~~~~~~~~~^\n        uri, serverSelectionTimeoutMS=server_selection_timeout_ms\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py\", line 797, in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nTypeError: 'Field' object is not iterable\n___________________ test_run_linear_research_with_citations ____________________\ntests/test_deep_research/test_linear_agent.py:106: in test_run_linear_research_with_citations\n    result = await run_linear_research(query)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/workflow.py:50: in run_linear_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable\n------------------------------ Captured log call -------------------------------\nERROR    server.projects.deep_research.workflow:workflow.py:61 Error running linear research: 'Field' object is not iterable\nTraceback (most recent call last):\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/workflow.py\", line 50, in run_linear_research\n    await deps.initialize()\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/dependencies.py\", line 72, in initialize\n    await self.initialize_mongodb()\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/shared/dependencies.py\", line 101, in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n                        ~~~~~~~~~~~~~~~~^\n        uri, serverSelectionTimeoutMS=server_selection_timeout_ms\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py\", line 797, in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nTypeError: 'Field' object is not iterable\n___________________ test_run_linear_research_error_handling ____________________\ntests/test_deep_research/test_linear_agent.py:125: in test_run_linear_research_error_handling\n    result = await run_linear_research(query)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/workflow.py:50: in run_linear_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable\n------------------------------ Captured log call -------------------------------\nERROR    server.projects.deep_research.workflow:workflow.py:61 Error running linear research: 'Field' object is not iterable\nTraceback (most recent call last):\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/workflow.py\", line 50, in run_linear_research\n    await deps.initialize()\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/dependencies.py\", line 72, in initialize\n    await self.initialize_mongodb()\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/shared/dependencies.py\", line 101, in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n                        ~~~~~~~~~~~~~~~~^\n        uri, serverSelectionTimeoutMS=server_selection_timeout_ms\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py\", line 797, in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nTypeError: 'Field' object is not iterable\n__________________ test_run_linear_research_session_isolation __________________\ntests/test_deep_research/test_linear_agent.py:156: in test_run_linear_research_session_isolation\n    result = await run_linear_research(query, session_id=\"custom-session-456\")\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/workflow.py:50: in run_linear_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable\n------------------------------ Captured log call -------------------------------\nERROR    server.projects.deep_research.workflow:workflow.py:61 Error running linear research: 'Field' object is not iterable\nTraceback (most recent call last):\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/workflow.py\", line 50, in run_linear_research\n    await deps.initialize()\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/dependencies.py\", line 72, in initialize\n    await self.initialize_mongodb()\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/shared/dependencies.py\", line 101, in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n                        ~~~~~~~~~~~~~~~~^\n        uri, serverSelectionTimeoutMS=server_selection_timeout_ms\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py\", line 797, in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nTypeError: 'Field' object is not iterable\n_____________________________ test_search_web_tool _____________________________\ntests/test_deep_research/test_linear_agent.py:176: in test_search_web_tool\n    ctx = RunContext(deps=mock_deep_research_deps, state={}, agent=None, run_id=\"test-run\")\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: RunContext.__init__() got an unexpected keyword argument 'state'\n_____________________________ test_fetch_page_tool _____________________________\ntests/test_deep_research/test_linear_agent.py:210: in test_fetch_page_tool\n    ctx = RunContext(deps=mock_deep_research_deps, state={}, agent=None, run_id=\"test-run\")\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: RunContext.__init__() got an unexpected keyword argument 'state'\n___________________________ test_parse_document_tool ___________________________\ntests/test_deep_research/test_linear_agent.py:236: in test_parse_document_tool\n    ctx = RunContext(deps=mock_deep_research_deps, state={}, agent=None, run_id=\"test-run\")\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: RunContext.__init__() got an unexpected keyword argument 'state'\n__________________________ test_ingest_knowledge_tool __________________________\ntests/test_deep_research/test_linear_agent.py:270: in test_ingest_knowledge_tool\n    ctx = RunContext(deps=mock_deep_research_deps, state={}, agent=None, run_id=\"test-run\")\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: RunContext.__init__() got an unexpected keyword argument 'state'\n__________________________ test_query_knowledge_tool ___________________________\ntests/test_deep_research/test_linear_agent.py:307: in test_query_knowledge_tool\n    ctx = RunContext(deps=mock_deep_research_deps, state={}, agent=None, run_id=\"test-run\")\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: RunContext.__init__() got an unexpected keyword argument 'state'\n_______________________ test_run_storm_research_success ________________________\ntests/test_deep_research/test_storm_workflow.py:121: in test_run_storm_research_success\n    result = await run_storm_research(query, session_id=\"test-session\")\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/storm_workflow.py:40: in run_storm_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable\n___________________ test_run_storm_research_with_session_id ____________________\ntests/test_deep_research/test_storm_workflow.py:152: in test_run_storm_research_with_session_id\n    result = await run_storm_research(query, session_id=session_id)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/storm_workflow.py:40: in run_storm_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable\n____________________ test_run_storm_research_error_handling ____________________\ntests/test_deep_research/test_storm_workflow.py:167: in test_run_storm_research_error_handling\n    result = await run_storm_research(query)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/storm_workflow.py:40: in run_storm_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable\n__________________ test_run_storm_research_state_persistence ___________________\ntests/test_deep_research/test_storm_workflow.py:200: in test_run_storm_research_state_persistence\n    result = await run_storm_research(query)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/storm_workflow.py:40: in run_storm_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable\n____________________ test_run_storm_research_max_iterations ____________________\ntests/test_deep_research/test_storm_workflow.py:231: in test_run_storm_research_max_iterations\n    result = await run_storm_research(query, max_iterations=10)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nserver/projects/deep_research/storm_workflow.py:40: in run_storm_research\n    await deps.initialize()\nserver/projects/deep_research/dependencies.py:72: in initialize\n    await self.initialize_mongodb()\nserver/projects/shared/dependencies.py:101: in initialize_mongodb\n    self.mongo_client = AsyncMongoClient(\n.venv/lib/python3.13/site-packages/pymongo/asynchronous/mongo_client.py:797: in __init__\n    if len([h for h in self._host if \"/\" in h]) > 1:\n                       ^^^^^^^^^^\nE   TypeError: 'Field' object is not iterable\n___________________________ test_fetch_page_success ____________________________\ntests/test_deep_research/test_tools.py:191: in test_fetch_page_success\n    assert response.success is True\nE   assert False is True\nE    +  where False = FetchPageResponse(url='https://example.com/test-article', content='', metadata={'error': \"'url'\"}, success=False).success\n------------------------------ Captured log call -------------------------------\nERROR    server.projects.deep_research.tools:tools.py:131 Error fetching page https://example.com/test-article: 'url'\nTraceback (most recent call last):\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py\", line 125, in fetch_page\n    url=result[\"url\"],\n        ~~~~~~^^^^^^^\nKeyError: 'url'\n_____________________ test_fetch_page_metadata_extraction ______________________\ntests/test_deep_research/test_tools.py:252: in test_fetch_page_metadata_extraction\n    assert \"title\" in response.metadata\nE   assert 'title' in {'error': \"'url'\"}\nE    +  where {'error': \"'url'\"} = FetchPageResponse(url='https://example.com/test-article', content='', metadata={'error': \"'url'\"}, success=False).metadata\n------------------------------ Captured log call -------------------------------\nERROR    server.projects.deep_research.tools:tools.py:131 Error fetching page https://example.com/test-article: 'url'\nTraceback (most recent call last):\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py\", line 125, in fetch_page\n    url=result[\"url\"],\n        ~~~~~~^^^^^^^\nKeyError: 'url'\n___________________________ test_parse_document_html ___________________________\ntests/test_deep_research/test_tools.py:282: in test_parse_document_html\n    with patch(\"server.projects.deep_research.tools.DocumentConverter\") as mock_converter:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'DocumentConverter'\n_________________________ test_parse_document_markdown _________________________\ntests/test_deep_research/test_tools.py:323: in test_parse_document_markdown\n    with patch(\"server.projects.deep_research.tools.DocumentConverter\") as mock_converter:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'DocumentConverter'\n___________________________ test_parse_document_text ___________________________\ntests/test_deep_research/test_tools.py:356: in test_parse_document_text\n    with patch(\"server.projects.deep_research.tools.DocumentConverter\") as mock_converter:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'DocumentConverter'\n_________________________ test_parse_document_chunking _________________________\ntests/test_deep_research/test_tools.py:394: in test_parse_document_chunking\n    with patch(\"server.projects.deep_research.tools.DocumentConverter\") as mock_converter:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'DocumentConverter'\n_____________________ test_ingest_knowledge_with_graphiti ______________________\ntests/test_deep_research/test_tools.py:500: in test_ingest_knowledge_with_graphiti\n    assert response.facts_added > 0\nE   assert 0 > 0\nE    +  where 0 = IngestKnowledgeResponse(document_id='69641bbb8700757bbc807154', chunks_created=3, facts_added=0, success=True, errors=[\"Graphiti ingestion failed: 'int' object has no attribute 'get'\"]).facts_added\n------------------------------ Captured log call -------------------------------\nERROR    server.projects.deep_research.tools:tools.py:335 Graphiti ingestion failed: 'int' object has no attribute 'get'\nTraceback (most recent call last):\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py\", line 326, in ingest_knowledge\n    facts_added = graphiti_result.get(\"facts_added\", 0)\n                  ^^^^^^^^^^^^^^^^^^^\nAttributeError: 'int' object has no attribute 'get'\n______________________ test_ingest_knowledge_empty_chunks ______________________\ntests/test_deep_research/test_tools.py:556: in test_ingest_knowledge_empty_chunks\n    assert response.success is True\nE   assert False is True\nE    +  where False = IngestKnowledgeResponse(document_id='', chunks_created=0, facts_added=0, success=False, errors=[\"object MagicMock can't be used in 'await' expression\"]).success\n------------------------------ Captured log call -------------------------------\nERROR    server.projects.deep_research.tools:tools.py:347 Error ingesting knowledge: object MagicMock can't be used in 'await' expression\nTraceback (most recent call last):\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py\", line 291, in ingest_knowledge\n    document_result = await documents_collection.insert_one(document_dict)\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: object MagicMock can't be used in 'await' expression\n________________________ test_query_knowledge_semantic _________________________\ntests/test_deep_research/test_tools.py:640: in test_query_knowledge_semantic\n    assert response.success is True\nE   assert False is True\nE    +  where False = QueryKnowledgeResponse(results=[], count=0, success=False).success\n------------------------------ Captured log call -------------------------------\nERROR    server.projects.deep_research.tools:tools.py:730 Error querying knowledge: 'async for' received an object from __aiter__ that does not implement __anext__: list_iterator\nTraceback (most recent call last):\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py\", line 574, in query_knowledge\n    vector_results = [doc async for doc in vector_cursor]\n                                           ^^^^^^^^^^^^^\nTypeError: 'async for' received an object from __aiter__ that does not implement __anext__: list_iterator\n__________________________ test_query_knowledge_text ___________________________\ntests/test_deep_research/test_tools.py:680: in test_query_knowledge_text\n    assert response.success is True\nE   assert False is True\nE    +  where False = QueryKnowledgeResponse(results=[], count=0, success=False).success\n------------------------------ Captured log call -------------------------------\nERROR    server.projects.deep_research.tools:tools.py:730 Error querying knowledge: 'async for' received an object from __aiter__ that does not implement __anext__: list_iterator\nTraceback (most recent call last):\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py\", line 624, in query_knowledge\n    text_results = [doc async for doc in text_cursor]\n                                         ^^^^^^^^^^^\nTypeError: 'async for' received an object from __aiter__ that does not implement __anext__: list_iterator\n_________________________ test_query_knowledge_hybrid __________________________\ntests/test_deep_research/test_tools.py:719: in test_query_knowledge_hybrid\n    assert response.success is True\nE   assert False is True\nE    +  where False = QueryKnowledgeResponse(results=[], count=0, success=False).success\n------------------------------ Captured log call -------------------------------\nERROR    server.projects.deep_research.tools:tools.py:730 Error querying knowledge: 'async for' received an object from __aiter__ that does not implement __anext__: list_iterator\nTraceback (most recent call last):\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py\", line 574, in query_knowledge\n    vector_results = [doc async for doc in vector_cursor]\n                                           ^^^^^^^^^^^^^\nTypeError: 'async for' received an object from __aiter__ that does not implement __anext__: list_iterator\n______________________ test_query_knowledge_with_graphiti ______________________\ntests/test_deep_research/test_tools.py:737: in test_query_knowledge_with_graphiti\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'\n____________________ test_query_knowledge_session_filtering ____________________\ntests/test_deep_research/test_tools.py:805: in test_query_knowledge_session_filtering\n    assert response.success is True\nE   assert False is True\nE    +  where False = QueryKnowledgeResponse(results=[], count=0, success=False).success\n------------------------------ Captured log call -------------------------------\nERROR    server.projects.deep_research.tools:tools.py:730 Error querying knowledge: 'async for' received an object from __aiter__ that does not implement __anext__: list_iterator\nTraceback (most recent call last):\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py\", line 574, in query_knowledge\n    vector_results = [doc async for doc in vector_cursor]\n                                           ^^^^^^^^^^^^^\nTypeError: 'async for' received an object from __aiter__ that does not implement __anext__: list_iterator\n______________________ test_query_knowledge_empty_results ______________________\ntests/test_deep_research/test_tools.py:829: in test_query_knowledge_empty_results\n    assert response.success is True\nE   assert False is True\nE    +  where False = QueryKnowledgeResponse(results=[], count=0, success=False).success\n------------------------------ Captured log call -------------------------------\nERROR    server.projects.deep_research.tools:tools.py:730 Error querying knowledge: 'async for' received an object from __aiter__ that does not implement __anext__: list_iterator\nTraceback (most recent call last):\n  File \"/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py\", line 574, in query_knowledge\n    vector_results = [doc async for doc in vector_cursor]\n                                           ^^^^^^^^^^^^^\nTypeError: 'async for' received an object from __aiter__ that does not implement __anext__: list_iterator\n_______________________ test_query_knowledge_graph_only ________________________\ntests/test_deep_research/test_tools.py:846: in test_query_knowledge_graph_only\n    with patch(\"server.projects.deep_research.tools.graphiti_search\") as mock_graphiti_search:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n../../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'server.projects.deep_research.tools' from '/home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/deep_research/tools.py'> does not have the attribute 'graphiti_search'\n=============================== warnings summary ===============================\nserver/config.py:26\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:26: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    mongodb_uri: str = Field(\n\nserver/config.py:46\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:46: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    neo4j_uri: str = Field(\"bolt://neo4j:7687\", env=\"NEO4J_URI\")\n\nserver/config.py:47\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:47: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    neo4j_user: str = Field(\"neo4j\", env=\"NEO4J_USER\")\n\nserver/config.py:48\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:48: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    neo4j_password: str = Field(\"password\", env=\"NEO4J_PASSWORD\")\n\nserver/config.py:49\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:49: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    neo4j_database: str = Field(\"neo4j\", env=\"NEO4J_DATABASE\")\n\nserver/config.py:54\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:54: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    use_graphiti: bool = Field(True, env=\"USE_GRAPHITI\")\n\nserver/config.py:57\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:57: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    use_contextual_embeddings: bool = Field(False, env=\"USE_CONTEXTUAL_EMBEDDINGS\")\n\nserver/config.py:58\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:58: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    use_agentic_rag: bool = Field(False, env=\"USE_AGENTIC_RAG\")\n\nserver/config.py:59\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:59: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    use_reranking: bool = Field(False, env=\"USE_RERANKING\")\n\nserver/config.py:60\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:60: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    use_knowledge_graph: bool = Field(False, env=\"USE_KNOWLEDGE_GRAPH\")\n\nserver/config.py:63\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:63: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    enable_entity_extraction: bool = Field(False, env=\"ENABLE_ENTITY_EXTRACTION\")\n\nserver/config.py:64\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:64: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    entity_extractor_type: str = Field(\"hybrid\", env=\"ENTITY_EXTRACTOR_TYPE\")\n\nserver/config.py:65\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:65: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    entity_llm_threshold: float = Field(0.7, env=\"ENTITY_LLM_THRESHOLD\")\n\nserver/config.py:66\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:66: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    ner_model: str = Field(\"Jean-Baptiste/roberta-large-ner-english\", env=\"NER_MODEL\")\n\nserver/config.py:69\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:69: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    jira_server: str | None = Field(None, env=\"JIRA_SERVER\")\n\nserver/config.py:70\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:70: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    jira_email: str | None = Field(None, env=\"JIRA_EMAIL\")\n\nserver/config.py:71\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:71: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    jira_api_token: str | None = Field(None, env=\"JIRA_API_TOKEN\")\n\nserver/config.py:74\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:74: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    confluence_url: str | None = Field(None, env=\"CONFLUENCE_URL\")\n\nserver/config.py:75\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:75: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    confluence_email: str | None = Field(None, env=\"CONFLUENCE_EMAIL\")\n\nserver/config.py:76\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:76: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    confluence_api_token: str | None = Field(None, env=\"CONFLUENCE_API_TOKEN\")\n\nserver/config.py:79\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:79: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    google_drive_credentials_path: str | None = Field(None, env=\"GOOGLE_DRIVE_CREDENTIALS_PATH\")\n\nserver/config.py:80\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:80: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    google_drive_token_path: str | None = Field(None, env=\"GOOGLE_DRIVE_TOKEN_PATH\")\n\nserver/config.py:83\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:83: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    google_calendar_credentials: str | None = Field(None, env=\"GOOGLE_CALENDAR_CREDENTIALS\")\n\nserver/config.py:84\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:84: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    google_calendar_token: str | None = Field(None, env=\"GOOGLE_CALENDAR_TOKEN\")\n\nserver/config.py:85\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:85: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    google_calendar_credentials_path: str | None = Field(\n\nserver/config.py:88\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:88: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    google_calendar_token_path: str | None = Field(None, env=\"GOOGLE_CALENDAR_TOKEN_PATH\")\n\nserver/config.py:89\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:89: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    google_calendar_id: str = Field(\"primary\", env=\"GOOGLE_CALENDAR_ID\")\n\nserver/config.py:92\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:92: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    n8n_api_url: str = Field(\"http://n8n:5678/api/v1\", env=\"N8N_API_URL\")\n\nserver/config.py:93\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:93: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    n8n_api_key: str | None = Field(None, env=\"N8N_API_KEY\")\n\nserver/config.py:96\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:96: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    searxng_url: str = Field(\"http://searxng:8080\", env=\"SEARXNG_URL\")\n\nserver/config.py:99\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:99: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    cloudflare_auth_domain: str = Field(\"\", env=\"CLOUDFLARE_AUTH_DOMAIN\")\n\nserver/config.py:100\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:100: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    cloudflare_aud_tag: str = Field(\"\", env=\"CLOUDFLARE_AUD_TAG\")\n\nserver/config.py:103\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:103: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    supabase_db_url: str = Field(\"\", env=\"SUPABASE_DB_URL\")\n\nserver/config.py:104\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:104: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    supabase_service_key: str | None = Field(None, env=\"SUPABASE_SERVICE_KEY\")\n\nserver/config.py:107\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:107: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    minio_endpoint: str = Field(\"http://supabase-minio:9020\", env=\"MINIO_ENDPOINT\")\n\nserver/config.py:108\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:108: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    minio_access_key: str = Field(\"supa-storage\", env=\"MINIO_ACCESS_KEY\")\n\nserver/config.py:109\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/config.py:109: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/\n    minio_secret_key: str = Field(\"secret1234\", env=\"MINIO_SECRET_KEY\")\n\nserver/projects/shared/llm.py:61\nserver/projects/shared/llm.py:61\nserver/projects/shared/llm.py:61\nserver/projects/shared/llm.py:61\nserver/projects/shared/llm.py:61\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/server/projects/shared/llm.py:61: DeprecationWarning: `OpenAIModel` was renamed to `OpenAIChatModel` to clearly distinguish it from `OpenAIResponsesModel` which uses OpenAI's newer Responses API. Use that unless you're using an OpenAI Chat Completions-compatible API, or require a feature that the Responses API doesn't support yet like audio.\n    return OpenAIModel(llm_choice, provider=provider)\n\n04-lambda/tests/test_deep_research/test_tools.py::test_parse_document_empty_content\n  /home/jaewilson07/GitHub/local-ai-packaged/04-lambda/.venv/lib/python3.13/site-packages/docling_core/transforms/chunker/hybrid_chunker.py:85: DeprecationWarning: Deprecated initialization parameter types for HybridChunker. For updated usage check out https://docling-project.github.io/docling/examples/hybrid_chunking/\n    warnings.warn(\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n--------------------------------- JSON report ----------------------------------\nreport saved to: /home/jaewilson07/GitHub/local-ai-packaged/.cursor/test_results/pytest_report.json\n=========================== short test summary info ============================\nFAILED tests/test_deep_research/test_graph_enhanced.py::test_query_knowledge_graphiti_enabled\nFAILED tests/test_deep_research/test_graph_enhanced.py::test_query_knowledge_graph_only_mode\nFAILED tests/test_deep_research/test_graph_enhanced.py::test_query_knowledge_graph_hybrid_merge\nFAILED tests/test_deep_research/test_graph_enhanced.py::test_query_knowledge_graph_deduplication\nFAILED tests/test_deep_research/test_graph_enhanced.py::test_query_knowledge_graph_multi_hop\nFAILED tests/test_deep_research/test_graph_enhanced.py::test_graph_search_entity_relationships\nFAILED tests/test_deep_research/test_graph_enhanced.py::test_graph_search_connected_entities\nFAILED tests/test_deep_research/test_graph_enhanced.py::test_graph_search_fallback\nFAILED tests/test_deep_research/test_linear_agent.py::test_run_linear_research_success\nFAILED tests/test_deep_research/test_linear_agent.py::test_run_linear_research_with_sources\nFAILED tests/test_deep_research/test_linear_agent.py::test_run_linear_research_with_citations\nFAILED tests/test_deep_research/test_linear_agent.py::test_run_linear_research_error_handling\nFAILED tests/test_deep_research/test_linear_agent.py::test_run_linear_research_session_isolation\nFAILED tests/test_deep_research/test_linear_agent.py::test_search_web_tool - ...\nFAILED tests/test_deep_research/test_linear_agent.py::test_fetch_page_tool - ...\nFAILED tests/test_deep_research/test_linear_agent.py::test_parse_document_tool\nFAILED tests/test_deep_research/test_linear_agent.py::test_ingest_knowledge_tool\nFAILED tests/test_deep_research/test_linear_agent.py::test_query_knowledge_tool\nFAILED tests/test_deep_research/test_storm_workflow.py::test_run_storm_research_success\nFAILED tests/test_deep_research/test_storm_workflow.py::test_run_storm_research_with_session_id\nFAILED tests/test_deep_research/test_storm_workflow.py::test_run_storm_research_error_handling\nFAILED tests/test_deep_research/test_storm_workflow.py::test_run_storm_research_state_persistence\nFAILED tests/test_deep_research/test_storm_workflow.py::test_run_storm_research_max_iterations\nFAILED tests/test_deep_research/test_tools.py::test_fetch_page_success - asse...\nFAILED tests/test_deep_research/test_tools.py::test_fetch_page_metadata_extraction\nFAILED tests/test_deep_research/test_tools.py::test_parse_document_html - Att...\nFAILED tests/test_deep_research/test_tools.py::test_parse_document_markdown\nFAILED tests/test_deep_research/test_tools.py::test_parse_document_text - Att...\nFAILED tests/test_deep_research/test_tools.py::test_parse_document_chunking\nFAILED tests/test_deep_research/test_tools.py::test_ingest_knowledge_with_graphiti\nFAILED tests/test_deep_research/test_tools.py::test_ingest_knowledge_empty_chunks\nFAILED tests/test_deep_research/test_tools.py::test_query_knowledge_semantic\nFAILED tests/test_deep_research/test_tools.py::test_query_knowledge_text - as...\nFAILED tests/test_deep_research/test_tools.py::test_query_knowledge_hybrid - ...\nFAILED tests/test_deep_research/test_tools.py::test_query_knowledge_with_graphiti\nFAILED tests/test_deep_research/test_tools.py::test_query_knowledge_session_filtering\nFAILED tests/test_deep_research/test_tools.py::test_query_knowledge_empty_results\nFAILED tests/test_deep_research/test_tools.py::test_query_knowledge_graph_only\n================= 38 failed, 54 passed, 43 warnings in 26.50s ==================\n",
  "stderr": "warning: `VIRTUAL_ENV=/home/jaewilson07/GitHub/local-ai-packaged/.venv` does not match the project environment path `.venv` and will be ignored; use `--active` to target the active environment instead\n"
}
